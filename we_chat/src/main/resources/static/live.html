<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>围观主播</title>
<!-- 设置IE兼容 -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- 在移动设备浏览器上，通过为视口（viewport）设置 meta 属性为 user-scalable=no 可以禁用其缩放（zooming）功能。
    	这样禁用缩放功能后，用户只能滚动屏幕，就能让你的网站看上去更像原生应用的感觉 -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- 引入css 和 js  先引入jquery 因为bootstrap是基于jquery的-->
<script type="text/javascript" src="js/jquery-2.1.1.js"></script>
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<style type="text/css">
body, div {
	margin: 0;
	padding: 0;
	background: #dff0d8;
}
</style>
</head>
<body>
	<img id="recive" style="width: 100%; height: 100%;" >


	<textarea id="dm" class="form-control" style="width: 100%; height: 300px;" readonly="readonly">
	</textarea>
	<div class="input-group">
		<input type="text" id="msg" class="form-control col-sm-10">
		<span class="input-group-btn">
			<button onclick="sendMsg()" class="btn btn-primary col-sm-2">发送消息</button>
		</span>
	
	</div>
	
	<script type="text/javascript">
		var recive_socket = new WebSocket("ws://120.78.190.69:80/djl/onlineServer");
		var image = document.getElementById("recive");
		recive_socket.onmessage = function(info) {
			image.src = info.data;
		}
		function $(id) {
			return document.getElementById(id);
		}
		var msg_socket = new WebSocket("ws://120.78.190.69:80/djl/chatroom");
		msg_socket.onmessage = function(data) {
			document.getElementById("dm").innerHTML += "&nbsp;" + data.data;
		}
		function sendMsg() {
			var msg = "路人说：" + document.getElementById("msg").value + "\n";
			msg_socket.send(msg);
		}
	</script>
</body>
</html>